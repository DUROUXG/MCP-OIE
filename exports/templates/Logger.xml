<codeTemplate version="4.5.2">
  <id>a1b2c3d4-e5f6-4a7b-8c9d-0e1f2a3b4c5d</id>
  <name>Logger</name>
  <revision>4</revision>
  <lastModified>
    <time>1764164690857</time>
    <timezone>Europe/Paris</timezone>
  </lastModified>
  <contextSet>
    <delegate>
      <contextType>CHANNEL_BATCH</contextType>
      <contextType>CHANNEL_POSTPROCESSOR</contextType>
      <contextType>DESTINATION_FILTER_TRANSFORMER</contextType>
      <contextType>CHANNEL_ATTACHMENT</contextType>
      <contextType>DESTINATION_RESPONSE_TRANSFORMER</contextType>
      <contextType>SOURCE_FILTER_TRANSFORMER</contextType>
      <contextType>DESTINATION_DISPATCHER</contextType>
      <contextType>CHANNEL_UNDEPLOY</contextType>
      <contextType>CHANNEL_PREPROCESSOR</contextType>
      <contextType>CHANNEL_DEPLOY</contextType>
      <contextType>SOURCE_RECEIVER</contextType>
    </delegate>
  </contextSet>
  <properties class="com.mirth.connect.model.codetemplates.BasicCodeTemplateProperties">
    <type>FUNCTION</type>
    <code>/**
 * QIALINK Logger - Wrapper for Mirth logger with consistent formatting
 *
 * Provides standardized logging with context support and automatic formatting
 * for QIALINK integration workflows.
 *
 * @param {String} level - Log level: &apos;info&apos;, &apos;warn&apos;, &apos;error&apos;, &apos;debug&apos;
 * @param {String} message - Log message
 * @param {Object} context - Optional context object to log (will be JSON stringified)
 */
function Logger(level, message, context) {
    var logMsg = &apos;[QIALINK] &apos; + message;

    if (context) {
        try {
            logMsg += &apos; | Context: &apos; + JSON.stringify(context);
        } catch (e) {
            logMsg += &apos; | Context: [Unable to stringify]&apos;;
        }
    }

    switch(level.toLowerCase()) {
        case &apos;info&apos;:
            logger.info(logMsg);
            break;
        case &apos;warn&apos;:
            logger.warn(logMsg);
            break;
        case &apos;error&apos;:
            logger.error(logMsg);
            break;
        case &apos;debug&apos;:
            logger.debug(logMsg);
            break;
        default:
            logger.info(logMsg);
    }
}</code>
  </properties>
</codeTemplate>